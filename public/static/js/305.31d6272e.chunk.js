"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[305],{9225:()=>{},9305:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(2483),n=a(3080),r=a(6824),i=a.n(r),o=a(7460),l=(a(9225),a(6723));const c=()=>{var e;const t=(0,o.Zp)(),[a,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),m=!1,u=(0,s.useRef)(null),{register:p,handleSubmit:h,setValue:g,watch:x,trigger:b,formState:{errors:f}}=(0,n.mN)({mode:"onChange",defaultValues:{patientName:"",patientSignature:"",dob:""}}),j=x();(0,s.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,s.useEffect)((()=>{m}),[m,g]),(0,s.useEffect)((()=>{b()}),[b]),(0,s.useEffect)((()=>{const e=localStorage.getItem("appointmentFormData");e&&console.log("Loaded stored form data:",JSON.parse(e))}),[]);return(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsx)("div",{className:"flash-message",children:c}),a&&(0,l.jsxs)("div",{className:"loading-spinner",children:["Submitting",(0,l.jsx)("span",{className:"dots"})]}),(0,l.jsx)("form",{className:"intake-form",onSubmit:h((async e=>{if(!u.current||u.current.isEmpty())return g("patientSignature","",{shouldValidate:!0}),void b("patientSignature");r(!0);const a=u.current.getTrimmedCanvas().toDataURL();e.patientSignature=a;const s={controlledSubstanceAutoRefillConsentPatientName:e.patientName,controlledSubstanceAutoRefillConsentPatientSignature:e.patientSignature,controlledSubstanceAutoRefillConsentDob:e.dob},n={...JSON.parse(localStorage.getItem("appointmentFormData"))||{},...s};try{const e=await fetch("/appointment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appointment:n})}),a=await e.json();e.ok?(console.log("\u2705 Submitted:",a),localStorage.removeItem("appointmentFormData"),d("\u2705 Appointment submitted successfully!"),setTimeout((()=>{t("/")}),2e3)):(console.error("\u274c Server error:",a),d("\u274c Error submitting appointment. Please try again."))}catch(i){console.error("\u274c Network error:",i),d("\u274c Network error. Please try again.")}finally{r(!1)}})),children:(0,l.jsxs)("div",{className:"book-appointment-container",children:[(0,l.jsxs)("div",{className:"banner",children:[(0,l.jsx)("div",{className:"banner-overlay"}),(0,l.jsx)("div",{className:"banner-text",children:(0,l.jsx)("h1",{children:"Book Telemedicine Consultation"})})]}),(0,l.jsxs)("div",{className:"content-section",children:[(0,l.jsx)("h2",{children:"Start Your Wellness Journey Today"}),(0,l.jsxs)("div",{className:"paper-container",children:[(0,l.jsxs)("div",{className:"progress",children:[(0,l.jsx)("div",{className:"progress-info",children:(0,l.jsx)("p",{children:"Step 6 of 6"})}),(0,l.jsx)("div",{className:"progress-bar-background",children:(0,l.jsx)("div",{className:"progress-bar-fill",style:{width:"100%"}})})]}),(0,l.jsxs)("div",{className:"consent-text",children:[(0,l.jsx)("p",{children:"I understand that Pure Health & Wellness has enrolled my controlled substance medication in Tailor Made Compounding\u2019s auto-refill program."}),(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:"Liability and Responsibility:"})}),(0,l.jsx)("p",{children:"I understand that TMC will not notify me or the clinic of refills..."})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Patient's Name (Required)"}),(0,l.jsx)("input",{type:"text",maxLength:"50",...p("patientName",{required:"Patient's Name is required"})}),(0,l.jsxs)("span",{className:"character-counter",children:[(null===(e=j.patientName)||void 0===e?void 0:e.length)||0," of 50 max characters"]}),f.patientName&&(0,l.jsx)("p",{className:"error-message",children:f.patientName.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Patient Signature (Required)"}),(0,l.jsx)("div",{className:"signature-pad-wrapper",children:(0,l.jsx)(i(),{ref:u,penColor:"black",canvasProps:{width:400,height:150,className:"signature-canvas-fixed"},onEnd:()=>{if(!u.current.isEmpty()){const e=u.current.getTrimmedCanvas().toDataURL();g("patientSignature",e),b("patientSignature")}}})}),(0,l.jsx)("button",{type:"button",onClick:()=>{u.current&&(u.current.clear(),g("patientSignature",""),b("patientSignature"))},className:"clear-signature",children:"Clear Signature"}),f.patientSignature&&(0,l.jsx)("p",{className:"error-message",children:f.patientSignature.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Date of Birth (Required)"}),(0,l.jsx)("input",{type:"date",...p("dob",{required:"Date of Birth is required"})}),f.dob&&(0,l.jsx)("p",{className:"error-message",children:f.dob.message})]}),(0,l.jsxs)("div",{className:"form-navigation button-row",children:[(0,l.jsx)("button",{type:"button",className:"btn-outline",onClick:()=>t("/book-appointment-step5"),children:"Previous"}),(0,l.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})]})]})]})]})})]})}}}]);
//# sourceMappingURL=305.31d6272e.chunk.js.map